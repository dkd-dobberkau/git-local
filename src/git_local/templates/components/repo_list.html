<div class="repo-list">
  {% for repo in repos %}
  <div class="repo-item" data-name="{{ repo.name|lower }}" data-date="{{ repo.last_commit_date.timestamp() }}" data-remote="{{ repo.remote_url or '' }}">
    <div class="repo-item-content">
      <div class="repo-item-name">{{ repo.name }}{% if repo.is_ddev %}<span class="badge badge-ddev">DDEV</span>{% endif %}{% if repo.is_docker and not repo.is_ddev %}<span class="badge badge-docker">Docker</span>{% endif %}{% if repo.is_python %}<span class="badge badge-python">Python</span>{% endif %}{% if repo.is_node %}<span class="badge badge-node">Node</span>{% endif %}{% if repo.is_php %}<span class="badge badge-php">PHP</span>{% endif %}{% if repo.is_go %}<span class="badge badge-go">Go</span>{% endif %}{% if repo.is_rust %}<span class="badge badge-rust">Rust</span>{% endif %}</div>
      <div class="repo-item-meta">
        <span class="repo-item-branch">{{ repo.branch }}</span>
        <span class="repo-item-status {% if repo.is_dirty %}dirty{% endif %}">
          {% if repo.is_dirty %}{{ repo.dirty_count }} uncommitted{% else %}clean{% endif %}
        </span>
        <span class="repo-item-branches">{{ repo.branch_count }} branch{% if repo.branch_count != 1 %}es{% endif %}</span>
      </div>
      <div class="repo-item-commit">
        "{{ repo.last_commit_message }}" · {{ repo.last_commit_relative }}
      </div>
    </div>
    <div class="repo-item-actions">
      <button
        class="action-btn"
        hx-post="/api/open/finder/{{ repo.name }}"
        hx-swap="none"
        title="Im Finder öffnen"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
        </svg>
      </button>
      <button
        class="action-btn"
        hx-post="/api/open/vscode/{{ repo.name }}"
        hx-swap="none"
        title="In VS Code öffnen"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="16 18 22 12 16 6"/>
          <polyline points="8 6 2 12 8 18"/>
        </svg>
      </button>
      <button
        class="action-btn"
        hx-post="/api/open/terminal/{{ repo.name }}"
        hx-swap="none"
        title="Terminal öffnen"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="4 17 10 11 4 5"/>
          <line x1="12" y1="19" x2="20" y2="19"/>
        </svg>
      </button>
    </div>
  </div>
  {% endfor %}

  {% if not repos %}
  <div class="empty-state">Keine Repositories gefunden.</div>
  {% endif %}
</div>
